<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Battleship Enterprise</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
</head>
<body>

<div id="auth-screen" class="screen">
    <div class="card auth-card">
        <h1 id="auth-title">Battleship</h1>
        <p class="subtitle">Command your fleet.</p>

        <div class="input-group">
            <input type="text" id="username" placeholder="Username" autocomplete="username">
            <input type="password" id="password" placeholder="Password" autocomplete="current-password">
        </div>

        <div class="buttons vertical-buttons">
            <button id="btn-action" class="primary" onclick="handleAuth()">Login</button>
            <button class="secondary outline" onclick="handleGuestLogin()">Play as Guest</button>
        </div>

        <div class="divider"></div>

        <p class="toggle-link">
            <span id="toggle-text">Need an account?</span>
            <a href="#" onclick="toggleAuthMode()">Click here</a>
        </p>

        <p id="auth-msg" class="error-text"></p>
    </div>
</div>

<div id="lobby-screen" class="screen hidden">
    <div class="card wide lobby-container">

        <div class="lobby-header">
            <div class="user-info">
                <h2>Welcome, <span id="display-user">Commander</span></h2>
                <span class="status-dot online"></span>
            </div>
            <button class="btn-cancel outline small" onclick="logout()">Logout</button>
        </div>

        <div class="lobby-columns">
            <div class="lobby-main">
                <div class="lobby-controls">
                    <button class="primary full-width-mobile" onclick="createGame()">Create Public Game</button>
                    <div class="join-box">
                        <input type="text" id="gameIdInput" placeholder="Enter Game ID">
                        <button class="secondary" onclick="joinGame()">Join</button>
                    </div>
                </div>

                <div class="section-header">
                    <h3>Recent Games</h3>
                </div>
                <div class="scroll-list-container">
                    <ul id="games-list" class="styled-list"></ul>
                </div>
            </div>

            <div class="lobby-social">
                <div class="section-header">
                    <h3>Friends & Invites</h3>
                </div>

                <div class="add-friend-box">
                    <input type="text" id="friendInput" placeholder="Username">
                    <button class="primary icon-btn" onclick="addFriend()" title="Add to Friends">+</button>
                    <button class="secondary icon-btn" onclick="challengeStranger()" title="Challenge directly">⚔</button>
                </div>

                <div class="scroll-list-container">
                    <ul id="friends-list" class="styled-list">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="game-screen" class="screen hidden">
    <div class="game-wrapper">
        <div class="game-header">
            <button class="outline small back-btn" onclick="leaveGame()">← Lobby</button>
            <div class="game-info">
                <div class="badge">ID: <span id="display-game-id"></span></div>
                <div class="badge status">State: <span id="game-state">WAITING</span></div>
            </div>
        </div>

        <div class="game-container">
            <div class="board-section my-section">
                <h3>My Fleet</h3>
                <div id="my-board" class="board"></div>

                <div id="setup-controls" class="hidden setup-panel">
                    <div class="setup-header">
                        <h4>Ship Yard</h4>
                        <p class="instruction">Select & Place</p>
                    </div>

                    <div class="orientation-toggle">
                        <label class="radio-label">
                            <input type="radio" name="orient" value="HORIZONTAL" checked>
                            <span>Horizontal</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="orient" value="VERTICAL">
                            <span>Vertical</span>
                        </label>
                    </div>

                    <div id="ship-yard" class="ship-grid">
                    </div>

                    <div id="placement-actions" class="hidden floating-actions">
                        <button class="btn-confirm" onclick="confirmPlacement()">✔ Confirm</button>
                        <button class="btn-cancel" onclick="cancelPlacement()">✘ Cancel</button>
                    </div>
                </div>
            </div>

            <div class="board-section enemy-section">
                <h3>Enemy Waters <span id="turn-indicator"></span></h3>
                <div id="opponent-board" class="board"></div>
            </div>
        </div>
    </div>

    <div id="error-msg" class="error-toast hidden"></div>
</div>

<script src="app.js"></script>
</body>
</html>